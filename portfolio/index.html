<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Booking Parking System</title>
    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <!-- Bootstrap -->
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
    <!-- Custom stylesheet -->
    <link type="text/css" rel="stylesheet" href="css/style.css" />
</head>

<body>
    <div id="booking" class="section">
        <div class="top-buttons">
            <button class="btn btn-primary">Login</button>
            <button class="btn btn-secondary">Register</button>
        </div>
        <div class="section-center">
            <div class="container">
                <div class="row">
                    <div class="booking-form">
                        <div class="form-header">
                            <h1>Book a Parking Spot</h1>
                        </div>
                        <form id="booking-form">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <span class="form-label">First Name</span>
                                        <input class="form-control" name="FirstName" type="text" placeholder="Enter your first name" required>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <span class="form-label">Last Name</span>
                                        <input class="form-control" name="LastName" type="text" placeholder="Enter your last name" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <span class="form-label">Email</span>
                                <input class="form-control" name="Email" type="email" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <span class="form-label">Phone</span>
                                <input class="form-control" name="Phone" type="tel" placeholder="Enter your phone number" required>
                            </div>
                            <div class="form-group">
                                <span class="form-label">Address</span>
                                <input class="form-control" name="UserAddress" type="text" placeholder="Enter your address" required>
                            </div>
                            <div class="row">
                                <div class="col-sm-5">
                                    <div class="form-group">
                                        <span class="form-label">Start Date</span>
                                        <input class="form-control" name="StartDate" type="date" required>
                                    </div>
                                </div>
                                <div class="col-sm-7">
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <span class="form-label">Hour</span>
                                                <select class="form-control" name="StartHour">
                                                    <option>1</option>
                                                    <option>2</option>
                                                    <option>3</option>
                                                    <option>4</option>
                                                    <option>5</option>
                                                    <option>6</option>
                                                    <option>7</option>
                                                    <option>8</option>
                                                    <option>9</option>
                                                    <option>10</option>
                                                    <option>11</option>
                                                    <option>12</option>
                                                </select>
                                                <span class="select-arrow"></span>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <span class="form-label">Min</span>
                                                <select class="form-control" name="StartMin">
                                                    <option>00</option>
                                                    <option>05</option>
                                                    <option>10</option>
                                                    <option>15</option>
                                                    <option>20</option>
                                                    <option>25</option>
                                                    <option>30</option>
                                                    <option>35</option>
                                                    <option>40</option>
                                                    <option>45</option>
                                                    <option>50</option>
                                                    <option>55</option>
                                                </select>
                                                <span class="select-arrow"></span>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <span class="form-label">AM/PM</span>
                                                <select class="form-control" name="StartAmPm">
                                                    <option>AM</option>
                                                    <option>PM</option>
                                                </select>
                                                <span class="select-arrow"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Parking Slot Selection -->
                            <div class="form-group">
                                <span class="form-label">Choose a parking slot</span>
                                <select class="form-control" name="SlotNumber" required>
                                    <option value="1">Slot #1</option>
                                    <option value="2">Slot #2</option>
                                    <option value="3">Slot #3</option>
                                    <option value="4">Slot #4</option>
                                    <option value="5">Slot #5</option>
                                    <option value="6">Slot #6</option>
                                    <option value="7">Slot #7</option>
                                    <option value="8">Slot #8</option>
                                    <option value="9">Slot #9</option>
                                    <option value="10">Slot #10</option>
                                    <option value="11">Slot #11</option>
                                    <option value="12">Slot #12</option>
                                </select>
                                <span class="select-arrow"></span>
                            </div>
                            <div class="form-btn">
                                <button class="submit-btn" type="submit">Book Now</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('booking-form').addEventListener('submit', function(e) {
        e.preventDefault();

        // Collect and compose StartTime field as a string: "YYYY-MM-DD HH:MM AM/PM"
        const date = this.elements['StartDate'].value;
        const hour = this.elements['StartHour'].value.padStart(2, '0');
        const min = this.elements['StartMin'].value.padStart(2, '0');
        const ampm = this.elements['StartAmPm'].value;
        const StartTime = `${date} ${hour}:${min} ${ampm}`;

        const data = {
            FirstName: this.elements['FirstName'].value.trim(),
            LastName: this.elements['LastName'].value.trim(),
            Email: this.elements['Email'].value.trim(),
            Phone: this.elements['Phone'].value.trim(),
            UserAddress: this.elements['UserAddress'].value.trim(),
            SlotNumber: this.elements['SlotNumber'].value,
            StartTime: StartTime
            // Add EndTime, UserID, AreaID if needed and available
        };

        fetch('http://localhost:3000/api/booking', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(response => response.json())
        .then(result => {
            alert('Booking successful: ' + JSON.stringify(result));
        })
        .catch(err => alert('Error: ' + err));
    });
});
</script>
</body>
</html>
